# item 16 프로퍼티는 동작이 아니라 상태를 나타내야 한다.

이번 아이템은 사실 심오하다.  
코틀린에서 프로퍼티의 의의 및 동작방식(자바와 비교)  
또한 코틀린내에서 getter/setter 커스텀을 쉽게 하도록 문법을 제공하지만 과연 객체의 계약으로 잡혀있는 getter/setter의 정의는 무엇인가?를 다룬다.  
하나하나 지식적인 측면과 철학적인 측면 모두 정리하고 넘어가자(사실 [item1](https://github.com/Mash-Up-Android/Effective_Study/blob/main/docs/EffectiveKotlin/%EC%B0%BD%ED%99%98/1%EC%9E%A5_%EC%95%88%EC%A0%95%EC%84%B1/item01.md)에서도 이 이야기를 이미했다.)

## 지식적인 측면 프로퍼티의 모든것
프로퍼티는 자바로 따지면 getter/setter/field로 되어있음은 이미 당연할 것이다.
그리고 커스텀 getter/setter 문법도 숨쉬듯이 사용할 것이다.  

프로퍼티가 함수기반으로 동작한다는것이 핵심이다.  

이미 당연한 이야기는 뒤에두고 "오호 다시보니 새롭네" 싶은 것들을 정리해보겠다.
- getter/setter 내부에서 field 를 사용할일이 없으면 backing field는 코틀린 내부적으로 생성하지 않음
- derived peroperty(파생 프로퍼티) 는 computed property, calculated property 라고도 부른다.(사실상 함수등으로 한번 래핑한 느낌)
- 코틀린에서 인터페이스에 프로퍼티를 선언할수 있는 이유는 프로퍼티가 사실상 함수기 떄문이다
    - 코틀린 인터페이스에서 그래서 초기값 설정 못함(필드가 생기니까)
    - 자바의 경우 인터페이스에서 상수 필드만 선언가능하다.(일반 필드는 불가하다)
- 필드를 open으로 열어서 상속하는것도 사실상 함수라 가능한것이다.(생각 좀만 해보면 당연하다)
- 프로퍼티 위임이 가능한것도 함수라 위임이 가능한거다(매커니즘이 연상되지 않는가?)
- 확장 프로퍼티도 만들 수 있다 -> 함수니까.
    - 근데 그냥 확장함수를 쓰지 이런게 있을 이유가 딱히 없는것 같다. 오히려 너무많은 방법을 제공해 좋지 못한 방향으로 이끄는것 같다.


## 개념적인(철학적인) 측면 getter/setter
> 프로퍼티를 함수 대신 사용할 수도 있지만, 그렇다고 완전히 대체해서 사용하는것은 좋지 않습니다.

책에서도 이러한 내용이 나와있듯 사실 getter/setter 커스텀을 코틀린 단에서 지원하지만 (자바에서는 직접만드니까 네이밍은 getter/setter로 해놓고 자기 맘대로 커스텀해버릴수는 있는것과 동일한 지원)  
하지만 이런 getter/setter 커스텀 자체가 올바른 행위인지 따져봐야할때이다.  

우테코에서 getter/setter에 대해 다룬다고 하지만 사실 그때만해도 객체지향에 대해 뇌가 깨어있지 않아서 듣고 이해하지 못한 상태로 넘어갔었다.  
하짐나 최근 제이슨이 복습하라고 우테코 채널에 던져줬던 "무엇이 getter/setter일까요" 라는 물음을 깊이 생각해볼 기회가 있었는데  
사실 getter/setter 커스텀 자체가 잘못사용하는것 아닌가 싶은 생각이 있다.

이미 get,set 자체가 필드값을 설정하고 값을 가져오는 계약으로 다가오고(네이밍, 사용관례) 해당 계약을 충실히 이행해야한다고 생각한다.  
즉 get,set 행위자체에 검사로직, 변환로직등 로직이 붙는순간 이미 getter/setter가 아닌데 이걸 이름을 잘못붙여서 사용하게 되는것이 아닌가라는 생각이다.


뭐 이책에서는 이정도의 강경파는 아니지만 어쩃든 getter/setter라고 생각하지 않을만한 행위들을 말해준다.
- 연산비용이 높은 행위는 프로퍼티에 어울리지 않는다.
- 비즈니스로직은 프로퍼티에 어울리지않는다.
- 다수 호출시 결과가 변경된다면 프로퍼티에 어울리지않는다.
- 자료형의 변환의 경우 어울리지 않는다.(관습적 차원 및 자료형은 추상화의 대상)
- 프로퍼티의 자체 상태변화를 일으키는 경우 프로퍼티에 어울리지않는다.

또한 다음과 같이 말하는데
> 원칙적으로 프로퍼티는 상태를 나타내거나 설정하기 위한 목적으로만 사용하는것이 좋고, 다른 로직을 포함하지 않아야합니다.
이말이 즉 getter/setter 본질(로직의 존재 여부) 그리고 계약에 맞춰서 사용하라는 말을 대신해주는것이라고 생각한다.

뭐 결국 사람마다 생각하는바가 다르고 이제 객체 계약 이런 이야기를 유명하고 개발을 잘하시는분들이 말씀해주시면 정설이 되지만
나처럼 허접이 이야기하면 그냥 꽉막힌 원칙주의자로 보일테니 그냥 이만 말을 아끼려한다.  

제이슨이 제공했던 [객체 계약 관련글](https://codingnuri.com/seven-virtues-of-good-object/) 을 다시한번 읽어보면서 그냥 혼자 곱씹어보는 시간을 가지면 그걸로 된것 같다.
