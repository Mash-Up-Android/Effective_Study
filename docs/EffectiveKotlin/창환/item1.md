# item 1 가변성을 제한하라

## 불변을 사용했을때 장점에 대한 공감 포인트
### 불변은 디버깅에 유리하다  
5p 본문 1,2,3 번 항목  

머리속으로 이해도되고 어느정도는 공감가지만 숨쉬듯이 느끼지는 못한다.  
솔직히 개발하면서 가끔 동시성 관련 이슈도 겪어(캐시워크 걸음수 관리같이 멀티스레드로 들어오는 경우)  
경각심은 있지만 뭔가 안지켰을때 막 찌릿찌릿한 수준은 아니다.  

아직 미친 멀티스레드 환경에서 많은 연산이 있는 주요한(돈관련된 계산 로직 같은)로직을 안겪어서 그런것 같다.  
-> 한번 이슈가 크게터져서 뚜들겨 맞기전에 찌릿찌릿 레이더를 켜야한다.  

솔직히 우리 회사에서 동시성을 겪을만한 부분은 걸음수 동기화가 큰데(멀티스레드에서 하나의 자원을 다룸)  
걸음수는 특정하기가 어려워서 일부 연산이 씹혀도 씹힌지도 모르고있는거 같다.  
웨어를 개발하며 웨어와 동기화 문제에서 동시성 문제를 겪어서 조금은 공감이 가는 상태가 되었을지도?  

돈관련 계산을 다루는 로직이 들어가면 확 공감될 것 같다.  
멀티유저 계산기를 언젠가 연습으로 만들어 봐야겠다.(배민 장바구니에 여러명이 담는 기능 같은거)

이러한 문제를 겪기 이전에 선제 조치로 불변을 애용해서 이런 문제를 틀어막자  
그리고 동시성 관련된 사항은 몸으로 겪기 이전에 좀 학습이 필요할거같다.  
(확실히 서버보다 안드가 동시성 관련하여 둔한 느낌이 든다. 나만 바보인가?)

### 불변은 테스트하기 쉽다
5p 4번 항목

뭐 꼭 불변만이 테스트하기 쉽다기 보다는(어짜피 상태가 바뀌는거 다 각각 개별 함수로 만들어서 만들어야할테니)  
검증의 범위가 좁혀지는거에서 매우 공감한다.  
검증의 범위를 한정하고 좁히는것 자체가 생각보다 머리아픈데 불변을 사용하는것 만으로 유닛테스트 검증범위가 한정될께 예상된다.  
이 얼마나 위력적인가?

### 옵저빙 패턴 같은데서 관리하기 어렵다, 객체내 룰이 있다면 유지하기 어렵다.
5p 5번항목

안드로이드 개발자라면 모두 겪어본 일 아니겠는가?  
옵져버블에다가 뮤터블한 리스트 박아놓고 내부값 바꿔주면 옵져빙 로직 안돈다.  
그리고 관리도 어렵다. 불변짱  
그리고 그 정렬 예시도 적절했다. 동시성과 콜라보하면 생각만해도 머리아플거 같다.

## 코틀린에서 가변성 제한하기(val, 가변/읽기전용 컬렉션, copy)
### val, 컬렉션 이야기는 시사하는 바가 같다.
요즘 미장이 박살나면서 이런밈이 있다.   
![image](https://github.com/user-attachments/assets/7c70fb1b-f83f-42a1-86ee-8dc2e114a140)  
이거랑 같은 이야기다.

val쓴다고 imutable 쓴다고 불변이 아니다.  
불변의 의미가 있어야 그곳이 불변이다.

제발 의도한대로 쓰고 이상한짓좀 하지마라.  
캐스팅, 리플렉션 등등 우회하지 말아라 제발  

코드 짜는사람은 방어운전처럼 사고 안나게 방어적 복사 하면서 안전 운행하고  
api 사용하는 사람도 솔직히 상식선을 지키면 되는데 그게 생각보다 안일어나니 이런 책들이 잘팔리는거 같다.  
상식선에서 움직이자.  

근데 책에서는 다운캐스팅에 대한 경계만 나와있는데  
캐스팅 자체가 객체지향을 좀 깨버리는 행위 아닌가?  
이거는 근데 공부 명확히 아직 안해서 모르겠다.  

대충 예상가기로는 객체가 본인의 행동을 결정해야한다 이런 이야기겠지만  
이런 내용 엘레강트 오브젝트 3.7 장에 나온다는데 난 돈이없어서 그책을 못샀다 흑흑흑.  
인터넷에 정리된글은 생략되서 도통이해가 안된다.  
연봉오르면 사서 읽어야지  

