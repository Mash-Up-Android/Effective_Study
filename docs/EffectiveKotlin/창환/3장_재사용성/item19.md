# item19 knowledge를 반복하여 사용하지 말라

책에서 첫 구문부터 정말 마음을 때리는 한문장이 나온다.

> 프로젝트에서 이미 있던 코드를 복사해서 붙여넣고 있다면,무언가가 잘못된 것이다.

잘못됨을 알면서도 어쩔수 없이 반복해왔던 시간들, 그리고 그로 인하여 점점 더 힘들어지는 상황들  
그것을 조금이라도 개선 해보고자하는 사투는 회사에 들어갔을 때부터 지겹게 해왔던것 같다.  

이런 사투를 벌여왔기에 중복이 얼마나 무서운지, 그리고 무지성으로 묶어버린 코드도 얼마나 무서운지  
뼈가 시리도록 안다.  

그래서 SRP를 읽었을때 감명 깊었고 머리에 박히는 원칙이였지 않나 싶다.  
하지만 해당 item에서 다루는 주제는 사실 경험으로, 그리고 회사의 도메인에 대한 이해도가 높은 상황에서  
대처가 가능하지 사실상 초심자에게는 너무 어려운 이야기이다.  

그래서 피부로 직접 느껴보되 몇가지 주의점만 가져가도 초심자에게는 충분한 무기가 될 수 있지 않을까 싶다.

해당 item을 결론적으로 정리하면 두가지 관점이 나온다.
- 중복을 피하라
- 함부로 공통화 하지마라
 
두가지 이야기가 상충되지만 둘다 맞는말이다.  
그 중간 어딘가에서 상황에 맞게 줄을 타는것이 우리의 실력을 반증할것이다.  

## 중복은 좋지 못하다.
- DRY(Dont repeat yourself)
- WET(Write Everything twice)
- SSOT(이건 좀 느낌이 다르지않나?)

중복이 별로라고 말하는 키워드들을 앞쪽에 서술해놨다(이런거 개발 랩배틀할때 좋으니까 스치듯이 외워도 좋다 ㅋㅋㅋ)  

책에서는 knowledge의 대표적인 두가지를 다음과 같이 정리한다.
- 로직: 프로그램이 어떠한 식으로 동작하는지와 프로그램이 어떻게 보이는지
- 공통 알고리즘: 원하는 동작을 하기 위한 알고리즘

사실 필자가 말하고 싶은 말이 느낌이 오긴하는데 막상 나도 정리해서 적으려고하니까 말이 이상해서 풀이를 썼다 지웠다를 반복하다가  
그냥 이상한 해석이 될것 같아서 지워버렸다.  

해당 글에서 제일 중요한 부분은 "모든 부분은 변화하고 변화에 대응해야한다" 같다.

근데 결국 내가 느끼는 바는 그냥 객체지향적으로 바라보면 이러한 문제들이 해결된다.(객체지향은 변화에 강한편이니까)  

타입(계약)이 명확하게 잘 명시되어있다면 그게 대응하는 적절한 객체들을 생성 및 책임을 분배할 수 있고,  
어짜피 객체가 주체적으로 행동한다면 객체의 재사용을 통해서 중복을 막을 수 있다.   

객체지향을 구구 절절히 설명하자면 너무 길지만 그냥 여기서 나온 문제점들을 객체지향적으로 어느정도 대응이되고 풀어낼 수 있다.
결론적으로 객체지향을 열심히 공부하자.

### [중복은 실수를 유발한다]        
프로그램 내부에서 여러 부분에 반복되어있는 코드의 변경은 힘들다고 나와있다.  
변경 중 놓치는 부분이 존재할 수도 있고 이미 살짝 변경되어 다른 코드로 인식 될수도 있다고 한다.  

사실 맞는말이며 알잘딱하게 중복을 제거하고 공통화 시키는것이 좋지만 정말 어려운 이야기고 초심자일때 섣부른 공통화가 난 더 무섭다고 생각한다.  
방금 위에서 나온 변경을 힘들게하는 케이스는 실수를 어느정도 범위내에서 예측할수 있고, 꼼꼼히 살펴보면 대응이 가능하다.  
또한 요즘 IDE 기능이 너무 좋아서 검색, 코드 히스토리 추적이 너무 잘되어있어서 어느정도 커버가 가능하다.  

하지만 의도치않은 공통화로 인한 문제는 예상하기도 힘드며, 당장 나타는것이 아닌 추후 예측 못한곳에서 발생하여 코드의 변경을 더 어렵게 한다고 생각한다.  
그래서 상황이 애매해서 판단이 서지 않는다면 개인적으로는 차라리 중복을 발생시키고 중복을 지속적으로 추적하는 방향을 추천한다.  

### [디자인 시스템 처럼 협의로 풀어나가기]
책에서 예시로 프로젝트의 여러곳에서 사용되고 있는 범용적인 버튼 이야기를 한다.  
사실 여기서는 각각을 코드를 풀어놓고 사용하는것의 단점을 이야기 하지만 나는 다른 관점으로 다가왔다.  

사실 디자인 시스템이 구축되지 않은 상황에서 섣부른 뷰의 공통화는 오히려 재앙을 불러일으킬 수 있다.(변경이 어려움)    
하지만 이를 팀내 왠만해서 변경되지 않을 룰인 디자인 시스템으로 만들어버린다면 공통화가 가져올수 있는 리스크를 제거해버릴 수 있다.  

꼭 모든것을 개발로 풀 필요는 없고 생각한다.  
이러한 팀내 룰을 제시해서 변경점을 막아버리는것 또한 변경에 대한 리스크를 관리하는 방법이라고 생각한다.  

## 함부로 공통화 하지마라 
이거는 그냥 SRP 하나로 끝난다.  
옛날에 [써놓은 글](https://github.com/2chang5/PigsBrain/blob/main/docs/OOP/solid/1.solid_%EB%8B%A8%EC%9D%BC_%EC%B1%85%EC%9E%84_%EC%9B%90%EC%B9%99.md)이 있는데 이거 하나로 정리해도 될것 같다.



