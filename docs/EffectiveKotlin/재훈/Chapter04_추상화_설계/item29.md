# 29. 외부 API를 랩(wrap)해서 사용하라

---

---

# 개요

API 설계자가 안전하지 않다고 하거나 안전하다고 해도, 신뢰 할 수 없다면 해당 API는 불안정한 것임

불안정한 API를 과도하게 사용하는 것은 굉장히 위험함

어쩔 수 없이 이런 API를 활용해야 한다면, 최대한 이러한 API를 로직과 직접 결합시키지 않는 것이 좋음

즉, 외부 라이브러리를 코드를 함수 또는 클래스로 감싸서 랩(wrap)해서 사용해야 함

### 장점

- 문제가 있다면 래퍼(wrapper)만 변경하면 되므로, API 변경에 쉽게 대응 가능
- 프로젝트의 스타일에 맞춰서 API 형태를 조정 가능
- 특정 라이브러리에서 문제가 발생하면, 래퍼를 수정해서 다른 라이브러리를 사용하도록 코드를 쉽게 변경 가능
- 필요한 경우 쉽게 동작을 추가하거나 수정 가능

### 단점

- 래퍼를 따로 정의해야 함
- 다른 개발자가 프로젝트를 다룰 때, 어떤 래퍼들이 있는지 따로 확인해야 함
- 래퍼들은 프로젝트 내부에서만 유효하므로, 문제가 생겨도 질문 불가능

장점과 단점을 모두 이해하고 랩할 API를 결정해야 함

라이브러리가 얼마나 안정적인지 확인할 수 있는 가장 기본적인 휴리스틱은 버전 번호와 사용자 수임

일반적으로 라이브러리 사용자가 많을수록 안정적임

사용자가 많으면, 제작자가 프로젝트에 작은 변화를 가할 때도 굉장히 신중해짐

사용자가 적은 라이브러리는 신중하게 사용을 결정하고, 클래스와 함수로 랩하는 것을 고려해야 함

---